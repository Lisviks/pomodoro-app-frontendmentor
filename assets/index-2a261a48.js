var h=Object.defineProperty;var m=(n,t,e)=>t in n?h(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var s=(n,t,e)=>(m(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();class l{constructor(){s(this,"time",{pomodoro:25,shortBreak:5,longBreak:15,autoBreak:!1});s(this,"font",1);s(this,"color",1);s(this,"modalTimeInputsInit",()=>{const{pomodoroInput:t,shortBreakInput:e,longBreakInput:r}=a();t.value=String(this.time.pomodoro),e.value=String(this.time.shortBreak),r.value=String(this.time.longBreak),this.initTimeInputEventListeners()});s(this,"modalFontInit",()=>{a().allFontElements.forEach((e,r)=>{e.classList.remove("active"),this.font-1===r&&e.classList.add("active"),this.initFontEventListeners(e)})});s(this,"modalColorInit",()=>{a().allColorElements.forEach((e,r)=>{e.classList.remove("active"),this.color-1===r&&e.classList.add("active"),this.initColorEventListeners(e)})});const t=localStorage.getItem("FEM-Pomodoro-Settings");if(t){const e=JSON.parse(t);this.time=e.time,this.font=e.font,this.color=e.color,this.applySettings()}else this.saveSettingsToLS()}init(){a().applyButton.addEventListener("click",()=>{this.saveSettingsToLS(),this.applySettings()}),this.modalTimeInputsInit(),this.modalFontInit(),this.modalColorInit()}saveSettingsToLS(){const t={time:this.time,font:this.font,color:this.color};localStorage.setItem("FEM-Pomodoro-Settings",JSON.stringify(t))}getTime(){return this.time}initFontEventListeners(t){const e=a().allFontElements;t.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("active")),t.classList.add("active");const r=t.className.split(/[-\s]/)[1];this.font=+r})}initColorEventListeners(t){const e=a().allColorElements;t.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("active")),t.classList.add("active");const r=t.className.split(/[-\s]/)[1];this.color=+r})}initTimeInputEventListeners(){const t=a().pomodoroInput,e=a().shortBreakInput,r=a().longBreakInput,o=a().autoBreakInput;o.checked=this.time.autoBreak,t.addEventListener("change",()=>this.time.pomodoro=+t.value),e.addEventListener("change",()=>this.time.shortBreak=+e.value),r.addEventListener("change",()=>this.time.longBreak=+r.value),o.addEventListener("change",()=>this.time.autoBreak=!this.time.autoBreak)}applySettings(){const t=document.querySelector("body");t.className=`font-${this.font} color-${this.color}`}}const a=()=>{const n=document.querySelector(".pomodoro-input"),t=document.querySelector(".short-break-input"),e=document.querySelector(".long-break-input"),r=document.querySelector(".auto-break-input"),o=document.querySelectorAll(".font-settings li"),i=document.querySelectorAll(".color-settings li"),c=document.querySelector(".apply-settings-btn");return{pomodoroInput:n,shortBreakInput:t,longBreakInput:e,allFontElements:o,allColorElements:i,applyButton:c,autoBreakInput:r}};class d{constructor(){s(this,"pomodoro");s(this,"shortBreak");s(this,"longBreak");s(this,"autoBreak");s(this,"timeLeft");s(this,"elapsedTime",0);s(this,"startPauseBtn",document.querySelector(".start-pause-btn"));s(this,"pomodoroBtn",document.querySelector(".pomodoro-break .pomodoro"));s(this,"shortBreakBtn",document.querySelector(".pomodoro-break .short-break"));s(this,"longBreakBtn",document.querySelector(".pomodoro-break .long-break"));s(this,"currentTimer","pomodoro");s(this,"interval");s(this,"breakNum",0);s(this,"formatTime",t=>{const e=Math.floor(t/60),r=t%60<10?`0${t%60}`:t%60;return`${e}:${r}`});s(this,"displayTime",t=>{const e=document.querySelector(".pomodoro-timer .timer");e.innerText=t});const{pomodoro:t,shortBreak:e,longBreak:r,autoBreak:o}=new l().time;this.pomodoro=t,this.shortBreak=e,this.longBreak=r,this.autoBreak=o,this.timeLeft=t*60}init(){this.displayTime(this.formatTime(this.pomodoro*60)),this.startPauseBtn.addEventListener("click",()=>{let t=this.startPauseBtn.innerText.toLowerCase();t==="start"?this.startTimer():t==="pause"?this.pauseTimer():t==="restart"&&this.restartTimer()}),this.pomodoroBtn.addEventListener("click",()=>this.startPomodoro()),this.shortBreakBtn.addEventListener("click",()=>this.startShortBreak()),this.longBreakBtn.addEventListener("click",()=>this.startLongBreak())}startTimer(){this.checkUpdatedSettings(),this.startPauseBtn.innerText="pause",this.interval=setInterval(()=>this.countdown(),1e3)}pauseTimer(){clearInterval(this.interval),this.startPauseBtn.innerText="start"}restartTimer(){this.timeLeft=new l().getTime().pomodoro*60,this.elapsedTime=0,this.startPauseBtn.innerText="pause",this.interval=setInterval(()=>this.countdown(),1e3)}checkUpdatedSettings(){const t=new l().time;t.pomodoro!==this.pomodoro&&this.currentTimer==="pomodoro"?(this.pomodoro=t.pomodoro,this.timeLeft=t.pomodoro*60,this.elapsedTime=0,clearInterval(this.interval)):t.shortBreak!==this.shortBreak&&this.currentTimer==="shortBreak"?(this.shortBreak=t.shortBreak,this.timeLeft=t.shortBreak*60,this.elapsedTime=0,clearInterval(this.interval)):t.longBreak!==this.longBreak&&this.currentTimer==="longBreak"&&(this.shortBreak=t.shortBreak,this.timeLeft=t.longBreak*60,this.elapsedTime=0,clearInterval(this.interval))}countdown(){this.timeLeft--,this.elapsedTime++;const t=this.formatTime(this.timeLeft);this.displayTime(t),this.progressBar(),this.timeLeft===0&&(clearInterval(this.interval),this.startPauseBtn.innerText="restart",this.switchTimerOnComplete())}progressBar(){const t=document.querySelector(".circular-chart");let e=this.pomodoro;this.currentTimer==="pomodoro"&&(e=this.pomodoro),this.currentTimer==="shortBreak"&&(e=this.shortBreak),this.currentTimer==="longBreak"&&(e=this.longBreak);const r=(this.elapsedTime/(e*60)*100).toFixed();t.style.strokeDasharray=`${r} 100`}startPomodoro(){this.currentTimer==="pomodoro"&&this.interval||(clearInterval(this.interval),this.timeLeft=new l().time.pomodoro*60,this.elapsedTime=0,this.currentTimer="pomodoro",this.switchBreakBtnStyle(),this.startPauseBtn.innerText="pause",this.interval=setInterval(()=>this.countdown(),1e3))}startShortBreak(){this.currentTimer==="shortBreak"&&this.interval||(clearInterval(this.interval),this.timeLeft=new l().time.shortBreak*60,this.elapsedTime=0,this.currentTimer="shortBreak",this.switchBreakBtnStyle(),this.startPauseBtn.innerText="pause",this.interval=setInterval(()=>this.countdown(),1e3))}startLongBreak(){this.currentTimer==="longBreak"&&this.interval||(clearInterval(this.interval),this.timeLeft=new l().time.longBreak*60,this.elapsedTime=0,this.currentTimer="longBreak",this.switchBreakBtnStyle(),this.startPauseBtn.innerText="pause",this.interval=setInterval(()=>this.countdown(),1e3))}switchBreakBtnStyle(){this.pomodoroBtn.classList.remove("active"),this.shortBreakBtn.classList.remove("active"),this.longBreakBtn.classList.remove("active"),this.currentTimer==="pomodoro"?this.pomodoroBtn.classList.add("active"):this.currentTimer==="shortBreak"?this.shortBreakBtn.classList.add("active"):this.currentTimer==="longBreak"&&this.longBreakBtn.classList.add("active")}switchTimerOnComplete(){this.autoBreak=new l().time.autoBreak,this.autoBreak&&(this.currentTimer==="shortBreak"||this.currentTimer==="longBreak"?this.startPomodoro():this.currentTimer==="pomodoro"&&this.breakNum<=1?(this.breakNum++,this.startShortBreak()):this.currentTimer==="pomodoro"&&this.breakNum>=2&&(this.breakNum=0,this.startLongBreak()))}}const u=()=>{const n=document.querySelector(".settings-icon"),t=document.querySelector(".settings-modal"),e=document.querySelector(".settings-modal .close-btn");n.addEventListener("click",()=>{t.classList.add("open")}),t.addEventListener("click",r=>{r.target.classList.contains("settings-modal")&&t.classList.remove("open")}),e.addEventListener("click",()=>{t.classList.remove("open")})},p=new l;p.init();const B=new d;B.init();u();
